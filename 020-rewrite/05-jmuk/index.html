<!DOCTYPE html>
<html><head>
    <title>書き直しイクナイ&nbsp;/ jmuk&nbsp;- Message Passing</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css'>
    <link rel='stylesheet' href='/css/style.css'>
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="alternate" type="application/rss+xml" title="Messsage Passing Feed" href="https://messagepassing.github.io/index.xml">

    <meta property="og:url"                content='https://messagepassing.github.io/020-rewrite/05-jmuk/' />
    <meta property="og:type"               content='article' />
    <meta property="og:title"              content='書き直しイクナイ&nbsp;/ jmuk&nbsp;- Message Passing' />
    <meta property="og:description"        content='いま目の前にあるこのコード、ついカッとなって書き直しちゃダメ？
' />
    <meta property="og:locale"             content='ja_JP' />
    <meta property="og:image"              content='https://messagepassing.github.io/ogimage.jpeg' />

    <meta property="twitter:card"        content='summary' />
    <meta property="twitter:title"       content='書き直しイクナイ&nbsp;/ jmuk&nbsp;- Message Passing' />
    <meta property="twitter:description" content='いま目の前にあるこのコード、ついカッとなって書き直しちゃダメ？
' />
    <meta property="twitter:image"       content='https://messagepassing.github.io/ogimage.jpeg' />

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MLYE8K3TB2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-MLYE8K3TB2');
    </script>
</head>
<body><div class='site-title'><div class="container px-4">
  <section class='p-4'>
    <a href='https://messagepassing.github.io/'><h1 class="title">Message Passing</h1></a>
    <p class="subtitle">はなしをふったりふられたり</p>
  </section>
</div></div>
<div class='section non-footer'>
<div class="container px-4">


<div class='columns is-desktop'>
  <div class='column'>
    <div class='article-container section is-size-5 is-size-6-touch pt-0'>
      <table class="table">
        <tr><th>Subject</th><td>書き直しイクナイ</td></tr>
        <tr><th>From</th><td><a href="https://jmuk.org/">jmuk</a></td></tr>
        <tr><th>Date</th><td>2021-09-25</td></tr>
      </table>
      <article class='content'><p>書き直しには自分も悪いイメージしかない。できれば避けたい。自分の関わった製品で、書き直したいとか一からやり直したい、みたいな欲求もほぼないなぁ。</p>
<h2 id="モバイルトランスコーダのはなし">モバイルトランスコーダのはなし</h2>
<p>ふと思い出したが、かつて書き直しプロジェクトに巻き込まれて嫌な目にあったことがあった。むかしむかし、モバイル向け検索チームではモバイルトランスコーダの書き直しというのをやっていたのだった。</p>
<p>昔のフィーチャーフォン（i-modeとか）に搭載されていたのは完全なHTMLはサポートしてない簡略化されたブラウザだったので、ふつうにウェブ全体から検索をして検索結果を提示しても、結果ページはそのままではユーザには読めないこともある。そこでウェブ検索の結果のページを解析し、変換して見えるようにするという技術が当時は開発されていて、いろんな会社がそういうのを作っていた。グーグルも社内製品があったんだけど、それを既存なアドホックな解析によるトランスコーダからWebKitベースに書き換えるというプロジェクトがあり、それに巻き込まれたのだった。</p>
<p>これはいくつかの要因が重なってまあまあ大変なことになっていた。詳細はあんまり書けない気がするが、かんたんに言うと、たとえば最初のリリースではfeature parityが整ってなかった。もちろん全部のビットを立てる必要はないとはいえ、どの機能は必須でどれがそうでないか、それらの優先順位はなにか、ぜんぜん誰もきちんと管理できていなかった。またコアチームはアジア圏におらず、しかし当時のモバイル検索の主戦場はアジア圏（というかほぼ日本）だったために、チームのやりたいこととやるべきことの齟齬があった。あと私個人がコアチームのTLとそりがあわなかったってのもあった。</p>
<p>まあ最後はさておき、そういういろんな不幸が重なって大変だった。あれは私の「書き直しイクナイ」という信念を強く強化したと思う。ただ補足をすると、その後コアチームが解散されて別の人たちが開発を引き取り、最終的にはどうにかなったと記憶している（わたしはその前に逃げ出したので関係ないけど）。それに技術的にも正しい方向だったし、新しいバージョンだったからこそできる機能（JSの実行結果からレンダリングするとか）もあった。でもまあ、書き直しの良し悪しというのはそれだけではないなというふうに思った（今にして思えばプロジェクトマネジメントがなってなかっただけかもしれないが……）。</p>
<h2 id="ime経験とgoogle日本語入力">IME経験とGoogle日本語入力</h2>
<p>Ruiさんがリンカを何回も作っているように、同じものを何度も作って、細かいことまで詳しくなって専門性が高まって、みたいなものにはあこがれる気持ちもある。自分もそういう感じではないなあ。</p>
<p>この点についてはそういえば、<a href="https://www.google.co.jp/ime/">Google日本語入力チーム</a>にはIME開発経験のある人が妙に多く集まっていた。工藤拓さんなんかは何度もラティス構造やViterbiアルゴリズムの実装を書いたと言っていてかっこいい。小松さんも（一応私も）IMEの開発経験は多少はあったし、<a href="https://ja.wikipedia.org/wiki/Anthy">Anthy</a>の作者の田畑さんもいた。Google日本語入力のアーキテクチャ（サーバプロセスとクライアントプロセスに分かれる、ただしサーバプロセスもユーザと同じ権限で動く）などはサーバプロセスがrootで動いていたWnnなどの設計やライブラリとしてリンクされるAnthyなどの経験を踏まえたうえでの設計だったし、経験のある人達による再挑戦という面もあった。ただわたしは自分の経験とはあんまり関係なくMac版の開発とかをやってたし、私としては同じものを何度も作るという感じでもなかったな。</p>
<h2 id="部分書き直し">部分書き直し</h2>
<p>部分的な書き直しや置き換え、コンポーネントの刷新、という意味ではよくあることだし、そちらはふつうにうまくいっているものも多い気がする。たとえばChromiumのビルドシステムはSconsだったのをGYPという独自のビルドシステムに置き換え、さらにGNというまた別なものに置き換えた。ChromeOSは最初にデモがあったころ（2010年ころ）にはX11/Gtk+ベースだったが、gtk+は早々に消され、のちにX11もなくなってすべて独自実装に置き換わった。ブラウザUIはけっこういろんな書き換えがしょっちゅう起こっている。UI revampみたいなのはよくある。</p>
<p>これってkzysさんのいうようなデスクトップアプリvsサーバサイド、みたいなことではないような気がしている。Chromiumは部分書き直しはしょっちゅうだから。ソフトウェアのつくり、リファクタリングしやすい設計かどうか、みたいな話でもあるように思う。部分書き直しができるような構造になっているソフトウェアはいいっていう話なんじゃないかな。</p>
<hr>
<div class='message is-medium  is-size-6-touch comment'>
<div class='message-header'>kzys</div>
<div class='message-body'>
<p>確かに、デスクトップアプリ vs サーバサイドというのは良くなかったですね。</p>
<p>ただ、アーキテクチャの良し悪しとはまた別に、大企業勢は人手が集められることが前提に、Joel Spolsky とかは人手がないことが前提にあるように思います。「書き直しするのでヘッドカウント増やしたらインターナルトランスファーが結構きました」と「書き直しするなら、他のところは一瞬手薄になりますよ? そのリスクは本当に背負えますか?」との溝というか。</p>

</div>
</div>
<div class='message is-medium  is-size-6-touch comment'>
<div class='message-header'>jmuk</div>
<div class='message-body'>
ヘッドカウントはたしかにそのとおりですね。会社が小さいと書き直しは社運をかけたプロジェクトになってしまう……
</div>
</div>
<div class='message is-medium  is-size-6-touch comment'>
<div class='message-header'>omo</div>
<div class='message-body'>
Netscape は 2002 年に 2500 人くらい従業員がいたらしい。ブラウザ作るだけなら足りそうだけど、他にもしょうもないことを色々やってたからブラウザチームはもっと小さかったのだろうね。500-1000 人くらい？ そんだけいりゃ十分でかい気もするけれど。
</div>
</div>
<div class='message is-medium  is-size-6-touch comment'>
<div class='message-header'>karino2</div>
<div class='message-body'>
<p>MSのOfficeチームにいたJoelをつかまえて大企業じゃない事前提ってのはあんまりな主張では。
この話の発端のエントリでリンクしている<a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">Things You Should Never Do, Part I – Joel on Software</a>で挙げている例も小さい企業の例って感じには全く見えないし…
まぁここに居ない人の真意を語ってもしかたない気はしますが。</p>
<p>モバイルトランスコーダ、以前SharaPointの似たようなのを担当していたのが同じチームに居たのですごい聞き覚えのある話だ…</p>

</div>
</div>
</article>
    </div>

    <nav class="pagination" role="navigation" aria-label="pagination">
    
    <a href="https://messagepassing.github.io/020-rewrite/06-morrita/"  class="pagination-next">
      書き直しという夢
      <span class='tag'>morrita</span>
    </a>
    
    
    <a href="https://messagepassing.github.io/020-rewrite/04-karino2/"  class="pagination-previous">
      失敗する書き直し、成功する書き直し
      <span class='tag'>karino2</span>
    </a>
    
    </nav>
  </div>
  <div class='column is-one-fifth-desktop sidebar'>
    <div class='card mb-2'><div class='card-content'><aside class='menu'>
      <p class='menu-label'><a href='https://messagepassing.github.io/020-rewrite/'>書き直しのはなし</a></p>
      <ul class='menu-list'>
      
        <li class='menu-item'>
            <a href='https://messagepassing.github.io/020-rewrite/01-morrita/'>morrita</a>
        </li>
      
        <li class='menu-item'>
            <a href='https://messagepassing.github.io/020-rewrite/02-shinh/'>shinh</a>
        </li>
      
        <li class='menu-item'>
            <a href='https://messagepassing.github.io/020-rewrite/03-kzys/'>kzys</a>
        </li>
      
        <li class='menu-item'>
            <a href='https://messagepassing.github.io/020-rewrite/04-karino2/'>karino2</a>
        </li>
      
        <li class='menu-item'>
            <a class='is-active'>jmuk</a>
        </li>
      
        <li class='menu-item'>
            <a href='https://messagepassing.github.io/020-rewrite/06-morrita/'>morrita</a>
        </li>
      
    </ul>
    </aside></div></div>

    <div class='card mb-2 has-background-light'><div class='card-content'><aside class='menu'>
      <p class='menu-label'>はなし</p>
      <ul class='menu-list'>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/022-pred/'>
          未来予想
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/021-push/'>
          強く押す話
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/020-rewrite/' class='is-active'>
          書き直しのはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/019-advice/'>
          助言のはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/018-deadline/'>
          締切のはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/017-food/'>
          たべもののはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/016-complexity/'>
          複雑さのはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/015-poems/'>
          ポエムのはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/014-reuse/'>
          再利用のはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/013-fboss/'>
          Facebook のオープンソース
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/012-manycore/'>
          コアあまりのはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/011-designdocs/'>
          Design Docs の逡巡
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/010-wced/'>
          毎日コードを書く話
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/009-feed/'>
          読むものさがし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/008-justright/'>
          ちょうどよさのはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/007-repo/'>
          モノレポのはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/006-hitech/'>
          ハイテクしごと
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/005-bookmark/'>
          ブックマークのはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/004-whatiread/'>
          今年読んだもの
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/003-editors/'>
          テキストエディタのはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/002-pl/'>
          言語のはなし
        </a></li>
             
        <li class='menu-item'>
          <a href='https://messagepassing.github.io/001-bug/'>
          バグのはなし
        </a></li>
      
      </ul>
    </aside></div></div></div>
</div>
</div>
</div>
<footer class='footer'><div class='container has-text-centered has-text-grey'>
    <a href='https://messagepassing.github.io/'>Message Passing</a> is licensed under 
    <a href='http://creativecommons.org/licenses/by-nc-sa/4.0/'>CC-NC-SA</a>.
    It has a <a href='/index.xml'>feed</a> and is hosted by a
    <a href='https://github.com/messagepassing'>GitHub organization</a>.
    Uses <a href='https://flic.kr/p/2jtVkok'>this</a> for the OG image.
</div></footer>
</body>
</html>
